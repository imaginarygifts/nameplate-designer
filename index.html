<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Imaginary Gifts â€“ Designer</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins&family=Great+Vibes&family=Dancing+Script&family=Playfair+Display&family=Montserrat&family=Cinzel+Decorative:wght@700&display=swap" rel="stylesheet">

<style>
body{margin:0;background:#000;font-family:Poppins}

/* LOGO */
#brand{
  background:#000;
  text-align:center;
  padding:30px;
  font-size:60px;
  font-family:"Cinzel Decorative",serif;
  background-image:linear-gradient(135deg,#7a5c00,#fff3b0,#7a5c00);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

/* CANVAS */
#canvas{
  background:#fff;
  border-radius:18px;
  display:block;
  margin:10px auto;
  touch-action:none;
}

/* BUTTONS */
button,select{
  height:120px;
  padding:30px;
  font-size:35px;
  background:#000;
  color:#f7f4e9;
  border:2px solid #f7f4e9;
  border-radius:14px;
}

.big-btn{width:100%;margin:30px 0}
.small-btn{height:90px;font-size:20px}

#canvasTools{
  display:flex;
  align-items:center;
  gap:20px;
  padding:0 18px;
}

#sizeSlider{
  flex:1;
  height:14px;
  display:none;
  accent-color:#fff3b0;
}
#sizeSlider::-webkit-slider-thumb{
  width:34px;height:34px;border-radius:50%;
}
#sizeSlider::-moz-range-thumb{
  width:34px;height:34px;border-radius:50%;
}

.palette{
  display:none;
  overflow-x:auto;
  white-space:nowrap;
  padding:10px;
}
.thumb{
  width:85px;height:85px;
  border-radius:8px;
  border:2px solid #fff;
  display:inline-block;
  margin-right:15px;
}
</style>
</head>

<body>

<div id="brand">Imaginary Gifts</div>
<canvas id="canvas"></canvas>

<div id="canvasTools">
  <button class="small-btn" onclick="toggleCanvasPalette()">Canvas Colour</button>
  <input id="sizeSlider" type="range" min="30" max="800">
</div>

<button id="colorBtn" class="big-btn" onclick="toggleColors()">SELECT COLOUR</button>
<div id="colors" class="palette"></div>

<div id="controls">
  <select onchange="addShape(this.value)">
    <option value="">Select Shape</option>
    <option value="rect">Rectangle</option>
    <option value="rounded">Rounded</option>
    <option value="circle">Circle</option>
    <option value="oval">Oval</option>
    <option value="pill">Pill</option>
  </select>
</div>

<button class="big-btn" onclick="addText()">Add Text</button>
<button class="big-btn" onclick="saveImage()">SAVE DESIGN</button>

<script>
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

let canvasBg="#fff";
let canvasBgImage=null;
let objects=[];
let selected=null;
let mode=null,sx=0,sy=0;

const CANVAS_BACKGROUNDS=["#fff","#000","#ccc","#5a3a22"];

/* ---------- SELECTION CONTROL ---------- */
function clearSelection(){
  selected=null;
  sizeSlider.style.display="none";
  colorBtn.style.display="none";
}

/* ---------- SIZE SLIDER ---------- */
function updateSizeSlider(){
  if(!selected){
    sizeSlider.style.display="none";
    return;
  }
  sizeSlider.style.display="block";
  sizeSlider.value=selected.w;
}

sizeSlider.oninput=function(){
  if(!selected || selected.locked) return;
  const ratio = selected.h / selected.w;
  selected.w = +this.value;
  selected.h = selected.w * ratio;
  if(selected.type==="text") selected.size = selected.w * 0.3;
  draw();
};

/* ---------- CANVAS ---------- */
function resizeCanvas(){
  canvas.width=Math.min(innerWidth-20,900);
  canvas.height=700;
  draw();
}
window.onresize=resizeCanvas;

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle=canvasBg;
  ctx.fillRect(0,0,canvas.width,canvas.height);

  objects.forEach(o=>{
    ctx.save();
    ctx.translate(o.x+o.w/2,o.y+o.h/2);
    ctx.translate(-o.w/2,-o.h/2);

    ctx.fillStyle=o.color;
    if(o.type==="shape"){
      ctx.beginPath();
      if(o.shape==="circle") ctx.arc(o.w/2,o.h/2,o.w/2,0,Math.PI*2);
      else ctx.rect(0,0,o.w,o.h);
      ctx.fill();
    }

    if(o.type==="text"){
      ctx.font=`${o.size}px ${o.font}`;
      ctx.fillText(o.text,0,0);
    }

    if(o===selected){
      ctx.strokeStyle="#1e90ff";
      ctx.strokeRect(0,0,o.w,o.h);
    }
    ctx.restore();
  });
}

/* ---------- MOUSE / TOUCH ---------- */
canvas.onmousedown=e=>{
  const r=canvas.getBoundingClientRect();
  const x=(e.clientX-r.left)*(canvas.width/r.width);
  const y=(e.clientY-r.top)*(canvas.height/r.height);

  clearSelection();

  for(let i=objects.length-1;i>=0;i--){
    const o=objects[i];
    if(x>o.x && x<o.x+o.w && y>o.y && y<o.y+o.h){
      selected=o;
      sx=x;sy=y;
      mode="move";
      updateSizeSlider();
      colorBtn.style.display="block";
      draw();
      return;
    }
  }
  draw();
};

canvas.onmousemove=e=>{
  if(!selected||mode!=="move")return;
  const r=canvas.getBoundingClientRect();
  const x=(e.clientX-r.left)*(canvas.width/r.width);
  const y=(e.clientY-r.top)*(canvas.height/r.height);
  selected.x+=x-sx;
  selected.y+=y-sy;
  sx=x;sy=y;
  draw();
};
canvas.onmouseup=()=>mode=null;

/* ---------- ADD OBJECTS ---------- */
function addShape(shape){
  if(!shape) return;
  clearSelection();
  selected={
    type:"shape",
    shape,
    x:canvas.width/2-150,
    y:canvas.height/2-150,
    w:300,
    h:300,
    color:"#000"
  };
  objects.push(selected);
  updateSizeSlider();
  colorBtn.style.display="block";
  draw();
}

function addText(){
  clearSelection();
  selected={
    type:"text",
    text:"Your Name",
    font:"Cinzel Decorative",
    size:80,
    x:200,
    y:200,
    w:300,
    h:100,
    color:"#000"
  };
  objects.push(selected);
  updateSizeSlider();
  colorBtn.style.display="block";
  draw();
}

/* ---------- COLORS ---------- */
function toggleColors(){
  const c=document.getElementById("colors");
  c.innerHTML="";
  ["#000","#fff","gold","silver"].forEach(col=>{
    const d=document.createElement("div");
    d.className="thumb";
    d.style.background=col;
    d.onclick=()=>{selected.color=col;c.style.display="none";draw();}
    c.appendChild(d);
  });
  c.style.display=c.style.display==="block"?"none":"block";
}

/* ---------- CANVAS BG ---------- */
function toggleCanvasPalette(){
  const p=document.createElement("div");
  p.className="palette";
  document.body.appendChild(p);
  CANVAS_BACKGROUNDS.forEach(c=>{
    const d=document.createElement("div");
    d.className="thumb";
    d.style.background=c;
    d.onclick=()=>{canvasBg=c;draw();p.remove();}
    p.appendChild(d);
  });
}

/* ---------- SAVE ---------- */
function saveImage(){
  const a=document.createElement("a");
  a.download="design.jpg";
  a.href=canvas.toDataURL("image/jpeg",1);
  a.click();
}

resizeCanvas();
draw();
colorBtn.style.display="none";
</script>

</body>
</html>