<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Imaginary Gifts â€“ Designer</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins&family=Cinzel+Decorative:wght@700&display=swap" rel="stylesheet">

<style>
body{margin:0;background:#000;font-family:Poppins}

/* BRAND */
#brand{
  text-align:center;
  padding:30px;
  font-size:60px;
  font-family:"Cinzel Decorative",serif;
  background:#000;
  background-image:linear-gradient(135deg,#7a5c00,#fff3b0,#7a5c00);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

/* CANVAS */
#canvas{
  background:#fff;
  border-radius:18px;
  display:block;
  margin:10px auto;
  touch-action:none;
}

/* BUTTONS */
button,select{
  padding:30px;
  font-size:22px;
  background:#000;
  color:#f7f4e9;
  border:2px solid #f7f4e9;
  border-radius:14px;
}

.small-btn{padding:12px 24px;font-size:14px}
.big-btn{width:100%;margin:10px 0}

#controls{
  display:grid;
  grid-template-columns:1fr auto;
  gap:18px;
  padding:18px;
}

.control-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:18px;
  padding:18px;
}

.right-tools{display:flex;gap:10px}
.mini-btn{padding:14px 16px;font-size:40px}

/* PALETTES */
.palette{
  display:none;
  overflow-x:auto;
  white-space:nowrap;
  padding:12px;
  background:#000;
}

.thumb{
  width:120px;
  height:120px;
  background:#fff;
  border-radius:14px;
  border:2px solid #fff;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  margin-right:12px;
  cursor:pointer;
}

.thumb svg{
  width:90%;
  height:90%;
}
</style>
</head>

<body>

<div id="brand">Imaginary Gifts</div>
<canvas id="canvas"></canvas>

<button class="small-btn" onclick="toggleCanvasPalette()">Canvas Colour</button>
<div id="canvasPalette" class="palette"></div>

<button id="colorBtn" class="big-btn" onclick="toggleColors()">SELECT COLOUR</button>
<div id="colors" class="palette"></div>

<div id="controls">
  <select onchange="addShape(this.value)">
    <option value="">Select Shape</option>
    <option value="rect">Rectangle</option>
    <option value="rounded">Rounded</option>
    <option value="circle">Circle</option>
    <option value="oval">Oval</option>
    <option value="pill">Pill</option>
  </select>

  <div class="right-tools">
    <button class="mini-btn" onclick="undo()">â†¶</button>
    <button class="mini-btn" onclick="toggleLock()">ðŸ”’</button>
    <button class="mini-btn" onclick="redo()">â†·</button>
  </div>
</div>

<div class="control-grid">
  <button onclick="addText()">Add Text</button>
  <select onchange="changeFont(this.value)">
    <option value="">Select Font</option>
    <option>Cinzel Decorative</option>
    <option>Poppins</option>
  </select>
</div>

<div class="control-grid">
  <button onclick="toggleLogoPalette()">Add Logo</button>
  <button onclick="toggleBorderPalette()">Add Border</button>
</div>

<div id="logoPalette" class="palette"></div>
<div id="borderPalette" class="palette"></div>

<button class="big-btn" onclick="saveImage()">SAVE DESIGN</button>

<script>
/* ================= CORE ================= */
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

let canvasBg="#fff";
let objects=[],selected=null;
let mode=null,sx=0,sy=0,startAngle=0;

let history=[],redoStack=[];

/* ================= VECTOR LIBRARY (200x200) ================= */
const LOGOS={
  om:"M100 20 C60 20 40 60 60 90 C40 120 60 170 100 170 C140 170 160 120 140 90 C160 60 140 20 100 20 Z",
  lotus:"M100 20 L120 60 L160 80 L120 100 L100 160 L80 100 L40 80 L80 60 Z",
  diya:"M40 120 C100 180 160 120 100 60 Z",
  heart:"M100 160 C20 80 60 20 100 60 C140 20 180 80 100 160 Z",
  star:"M100 20 L120 80 L180 80 L130 120 L150 180 L100 140 L50 180 L70 120 L20 80 L80 80 Z"
};

const BORDERS={
  simple:"M10 10 H190 V190 H10 Z",
  double:"M10 10 H190 V190 H10 Z M30 30 H170 V170 H30 Z",
  rounded:"M20 10 H180 Q190 10 190 20 V180 Q190 190 180 190 H20 Q10 190 10 180 V20 Q10 10 20 10 Z",
  frame:"M40 10 H160 V40 H190 V160 H160 V190 H40 V160 H10 V40 H40 Z",
  wave:"M10 30 Q50 10 90 30 T170 30 V170 Q130 190 90 170 T10 170 Z"
};

const ELEMENT_COLORS=["#000","#fff","#e74c3c","#3498db","#2ecc71","gold","silver","rosegold"];
const CANVAS_BACKGROUNDS=["#fff","#000","#ccc","#5a3a22"];

/* ================= CANVAS ================= */
function resizeCanvas(){
  canvas.width=Math.min(innerWidth-20,900);
  canvas.height=700;
  draw();
}
window.onresize=resizeCanvas;

/* ================= METALLIC ================= */
function metallic(type,w){
  const g=ctx.createLinearGradient(0,0,w,0);
  if(type==="gold"){g.addColorStop(0,"#7a5c00");g.addColorStop(.5,"#fff3b0");g.addColorStop(1,"#7a5c00");}
  if(type==="silver"){g.addColorStop(0,"#777");g.addColorStop(.5,"#fff");g.addColorStop(1,"#777");}
  if(type==="rosegold"){g.addColorStop(0,"#8b5a5a");g.addColorStop(.5,"#f3c1c1");g.addColorStop(1,"#8b5a5a");}
  return g;
}

/* ================= DRAW ================= */
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle=canvasBg;
  ctx.fillRect(0,0,canvas.width,canvas.height);

  objects.forEach(o=>{
    ctx.save();
    ctx.translate(o.x+o.w/2,o.y+o.h/2);
    ctx.rotate(o.rotation);
    ctx.translate(-o.w/2,-o.h/2);

    ctx.fillStyle=["gold","silver","rosegold"].includes(o.color)?metallic(o.color,o.w):o.color;

    if(o.type==="vector"){
      ctx.scale(o.w/200,o.h/200);
      ctx.fill(new Path2D(o.path));
    }

    ctx.restore();
  });
}

/* ================= ADD VECTOR ================= */
function addVector(path){
  saveState();
  const size=canvas.width*0.35;
  selected={type:"vector",path,x:(canvas.width-size)/2,y:(canvas.height-size)/2,w:size,h:size,rotation:0,color:"#000",locked:false};
  objects.push(selected);
  draw();
}

/* ================= PALETTES ================= */
function buildPalette(el,data){
  el.innerHTML="";
  Object.values(data).forEach(p=>{
    const d=document.createElement("div");
    d.className="thumb";
    d.innerHTML=`<svg viewBox="0 0 200 200"><path d="${p}" fill="#000"/></svg>`;
    d.onclick=()=>{addVector(p);el.style.display="none";}
    el.appendChild(d);
  });
}

function toggleLogoPalette(){
  const p=document.getElementById("logoPalette");
  buildPalette(p,LOGOS);
  p.style.display=p.style.display==="block"?"none":"block";
  document.getElementById("borderPalette").style.display="none";
}

function toggleBorderPalette(){
  const p=document.getElementById("borderPalette");
  buildPalette(p,BORDERS);
  p.style.display=p.style.display==="block"?"none":"block";
  document.getElementById("logoPalette").style.display="none";
}

/* ================= COLORS ================= */
function toggleColors(){
  const c=document.getElementById("colors");
  c.innerHTML="";
  ELEMENT_COLORS.forEach(col=>{
    const d=document.createElement("div");
    d.className="thumb";
    d.style.background=
      col==="gold"?"linear-gradient(135deg,#7a5c00,#fff3b0,#7a5c00)":
      col==="silver"?"linear-gradient(135deg,#777,#fff,#777)":
      col==="rosegold"?"linear-gradient(135deg,#8b5a5a,#f3c1c1,#8b5a5a)":col;
    d.onclick=()=>{if(selected){selected.color=col;draw();}c.style.display="none";}
    c.appendChild(d);
  });
  c.style.display=c.style.display==="block"?"none":"block";
}

function toggleCanvasPalette(){
  const p=document.getElementById("canvasPalette");
  p.innerHTML="";
  CANVAS_BACKGROUNDS.forEach(c=>{
    const d=document.createElement("div");
    d.className="thumb";
    d.style.background=c;
    d.onclick=()=>{canvasBg=c;p.style.display="none";draw();}
    p.appendChild(d);
  });
  p.style.display=p.style.display==="block"?"none":"block";
}

/* ================= HISTORY ================= */
function saveState(){history.push(JSON.stringify({objects,canvasBg}));redoStack=[];}
function undo(){if(!history.length)return;redoStack.push(JSON.stringify({objects,canvasBg}));const s=JSON.parse(history.pop());objects=s.objects;canvasBg=s.canvasBg;draw();}
function redo(){if(!redoStack.length)return;history.push(JSON.stringify({objects,canvasBg}));const s=JSON.parse(redoStack.pop());objects=s.objects;canvasBg=s.canvasBg;draw();}

function saveImage(){
  const a=document.createElement("a");
  a.download="design.jpg";
  a.href=canvas.toDataURL("image/jpeg",1);
  a.click();
}

resizeCanvas();
draw();
</script>

</body>
</html>