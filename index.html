<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Imaginary Gifts â€“ Designer</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins&family=Great+Vibes&family=Dancing+Script&family=Playfair+Display&family=Montserrat&family=Cinzel+Decorative:wght@700&display=swap" rel="stylesheet">

<style>
body{margin:0;background:#000;font-family:Poppins}

/* LOGO */
#brand{
  background:#000;
  text-align:center;
  padding:30px;
  font-size:60px;
  font-family:"Cinzel Decorative",serif;
  background-image:linear-gradient(135deg,#7a5c00,#fff3b0,#7a5c00);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

/* CANVAS */
#canvas{
  background:#fff;
  border-radius:18px;
  display:block;
  margin:10px auto;
  touch-action:none;
}

/* BUTTONS */
button,select{
  height:120px;
  padding:30px;
  font-size:35px;
  background:#000;
  color:#f7f4e9;
  border:2px solid #f7f4e9;
  border-radius:14px;
}

.big-btn{width:100%;margin:30px 0}
.small-btn{height:90px;font-size:20px}

#canvasTools{
  display:flex;
  align-items:center;
  gap:20px;
  padding:0 18px;
}

#sizeSlider{
  flex:1;
  height:14px;
  display:none;
  accent-color:#fff3b0;
}
#sizeSlider::-webkit-slider-thumb{
  width:34px;height:34px;border-radius:50%;
}
#sizeSlider::-moz-range-thumb{
  width:34px;height:34px;border-radius:50%;
}

.palette{
  display:none;
  overflow-x:auto;
  white-space:nowrap;
  padding:10px;
}
.thumb{
  width:85px;height:85px;
  border-radius:8px;
  border:2px solid #fff;
  display:inline-block;
  margin-right:15px;
}
</style>
</head>

<body>

<div id="brand">Imaginary Gifts</div>
<canvas id="canvas"></canvas>

<div id="canvasTools">
  <button class="small-btn" onclick="toggleCanvasPalette()">Canvas Colour</button>
  <input id="sizeSlider" type="range" min="30" max="800">
</div>

<button id="colorBtn" class="big-btn" onclick="toggleColors()">SELECT COLOUR</button>
<div id="colors" class="palette"></div>

<button class="big-btn" onclick="addShape('circle')">Add Shape</button>
<button class="big-btn" onclick="addText()">Add Text</button>
<button class="big-btn" onclick="saveImage()">SAVE DESIGN</button>

<script>
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

let canvasBg="#fff";
let canvasBgImage=null;
let objects=[];
let selected=null;
let mode=null,sx=0,sy=0;

const CANVAS_BACKGROUNDS=["#fff","#000","#ccc","#5a3a22"];
const CANVAS_BG_IMAGES=[
 "https://i.pinimg.com/236x/ed/1e/76/ed1e760d44aafe7ac6e1a46550396fd8.jpg",
 "https://img.freepik.com/premium-photo/full-frame-shot-wall_1048944-7864244.jpg"
];

function resizeCanvas(){
  canvas.width=Math.min(innerWidth-20,900);
  canvas.height=700;
  draw();
}
window.onresize=resizeCanvas;

/* ================= SELECTION CONTROL ================= */
function clearSelection(){
  selected=null;
  document.getElementById("sizeSlider").style.display="none";
  colorBtn.style.display="none";
}

function updateSizeSlider(){
  if(!selected){clearSelection();return;}
  sizeSlider.style.display="block";
  sizeSlider.value=selected.w;
}

/* ================= DRAW ================= */
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle=canvasBg;
  ctx.fillRect(0,0,canvas.width,canvas.height);

  if(canvasBgImage){
    ctx.drawImage(canvasBgImage,0,0,canvas.width,canvas.height);
  }

  objects.forEach(o=>{
    ctx.save();
    ctx.translate(o.x+o.w/2,o.y+o.h/2);
    ctx.rotate(o.rotation||0);
    ctx.translate(-o.w/2,-o.h/2);
    ctx.fillStyle=o.color;
    ctx.beginPath();
    ctx.arc(o.w/2,o.h/2,o.w/2,0,Math.PI*2);
    ctx.fill();
    if(o===selected){
      ctx.strokeStyle="#1e90ff";
      ctx.strokeRect(0,0,o.w,o.h);
    }
    ctx.restore();
  });
}

/* ================= CANVAS EVENTS ================= */
canvas.onmousedown=e=>{
  const r=canvas.getBoundingClientRect();
  const x=(e.clientX-r.left)*(canvas.width/r.width);
  const y=(e.clientY-r.top)*(canvas.height/r.height);

  clearSelection();

  for(let i=objects.length-1;i>=0;i--){
    const o=objects[i];
    if(x>o.x && x<o.x+o.w && y>o.y && y<o.y+o.h){
      selected=o;
      sx=x;sy=y;
      mode="move";
      updateSizeSlider();
      colorBtn.style.display="block";
      draw();
      return;
    }
  }
  draw();
};

canvas.onmousemove=e=>{
  if(!selected||mode!=="move")return;
  const r=canvas.getBoundingClientRect();
  const x=(e.clientX-r.left)*(canvas.width/r.width);
  const y=(e.clientY-r.top)*(canvas.height/r.height);
  selected.x+=x-sx;
  selected.y+=y-sy;
  sx=x;sy=y;
  draw();
};
canvas.onmouseup=()=>mode=null;

/* ================= ADD OBJECTS ================= */
function addShape(){
  clearSelection();
  selected={x:200,y:200,w:300,h:300,color:"#000"};
  objects.push(selected);
  updateSizeSlider();
  colorBtn.style.display="block";
  draw();
}

function addText(){
  clearSelection();
  selected={x:200,y:200,w:300,h:300,color:"#000"};
  objects.push(selected);
  updateSizeSlider();
  colorBtn.style.display="block";
  draw();
}

/* ================= SLIDER ================= */
sizeSlider.oninput=function(){
  if(!selected)return;
  selected.w=+this.value;
  selected.h=+this.value;
  draw();
};

/* ================= CANVAS BG ================= */
function toggleCanvasPalette(){
  const p=document.createElement("div");
  p.className="palette";
  document.body.appendChild(p);
  CANVAS_BACKGROUNDS.forEach(c=>{
    const d=document.createElement("div");
    d.className="thumb";
    d.style.background=c;
    d.onclick=()=>{canvasBg=c;canvasBgImage=null;draw();p.remove();}
    p.appendChild(d);
  });
}

/* ================= SAVE ================= */
function saveImage(){
  const a=document.createElement("a");
  a.download="design.jpg";
  a.href=canvas.toDataURL("image/jpeg",1);
  a.click();
}

resizeCanvas();
draw();
colorBtn.style.display="none";
</script>

</body>
</html>