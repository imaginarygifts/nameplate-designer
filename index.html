<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Imaginary Gifts â€“ Nameplate Designer</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:Poppins;
  background:#eee;
}

/* ---------- BRAND HEADER ---------- */
#brand-header{
  background:#000;
  color:#f7f4e9;
  text-align:center;
  padding:20px 10px;
  font-size:26px;
  font-weight:600;
  letter-spacing:1px;
}

/* ---------- CANVAS ---------- */
#canvas{
  background:#fff;
  border:2px solid #000;
  display:block;
  margin:10px auto;
  touch-action:none;
}

/* ---------- BOTTOM CONTROLS ---------- */
#bottom-controls{
  background:#000;
  padding:18px;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:18px;
}

/* DOUBLE HEIGHT CONTROLS */
#bottom-controls select,
#bottom-controls button{
  width:100%;
  padding:32px;                 /* doubled */
  font-size:22px;               /* bigger text */
  background:#000;
  color:#f7f4e9;
  border:2px solid #f7f4e9;
  border-radius:14px;
}

/* ---------- COLOR PANEL ---------- */
#colors{
  display:none;
  background:#000;
  padding:18px;
  grid-column:1 / -1;
  text-align:center;
}
.color{
  width:42px;
  height:42px;
  border-radius:50%;
  display:inline-block;
  margin:10px;
  border:2px solid #f7f4e9;
  cursor:pointer;
}

/* ---------- SAVE BUTTON ---------- */
#save-wrapper{
  margin-top:50px;              /* GAP */
}

#save-btn{
  width:100%;
  padding:34px;
  font-size:24px;
  font-weight:600;
  background:#000;
  color:#f7f4e9;
  border:none;
  border-top:3px solid #f7f4e9;
}
</style>
</head>

<body>

<!-- BRAND -->
<div id="brand-header">Imaginary Gifts</div>

<!-- CANVAS -->
<canvas id="canvas"></canvas>

<!-- CONTROLS -->
<div id="bottom-controls">

  <select onchange="addShape(this.value)">
    <option value="">Select Shape</option>
    <option value="rect">Rectangle</option>
    <option value="rounded">Rounded</option>
    <option value="circle">Circle</option>
    <option value="oval">Oval</option>
    <option value="pill">Pill</option>
    <option value="diamond">Diamond</option>
    <option value="hexagon">Hexagon</option>
  </select>

  <button id="colorBtn" onclick="toggleColors()" style="display:none;">
    Select Colour
  </button>

  <button onclick="addText()">Add Text</button>

  <select onchange="changeFont(this.value)">
    <option value="">Select Font</option>
    <option>Poppins</option>
    <option>Montserrat</option>
    <option>Playfair Display</option>
    <option>Great Vibes</option>
    <option>Dancing Script</option>
  </select>

  <div id="colors"></div>

</div>

<!-- SAVE WITH GAP -->
<div id="save-wrapper">
  <button id="save-btn" onclick="saveImage()">SAVE DESIGN</button>
</div>

<script>
/* ---------- CANVAS RESPONSIVE ---------- */
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function resizeCanvas(){
  const size = Math.min(window.innerWidth - 20, window.innerHeight * 0.7);
  canvas.width = size;
  canvas.height = size;
  draw();
}
window.addEventListener("resize", resizeCanvas);

/* ---------- STATE ---------- */
const colorsDiv = document.getElementById("colors");
const colorBtn = document.getElementById("colorBtn");

let objects=[], selected=null;
let mode=null, sx=0, sy=0, startAngle=0;

/* ---------- COLORS ---------- */
const PALETTE=[
  {type:"solid", value:"#000"},
  {type:"solid", value:"#fff"},
  {type:"solid", value:"#5a3a22"},
  {type:"solid", value:"#f7f4e9"},
  {type:"solid", value:"#e74c3c"},
  {type:"solid", value:"#3498db"},
  {type:"solid", value:"#2ecc71"},
  {type:"metallic", value:"gold"},
  {type:"metallic", value:"silver"},
  {type:"metallic", value:"rosegold"}
];

function metallicGradient(type,w){
  const g=ctx.createLinearGradient(0,0,w,0);
  if(type==="gold"){g.addColorStop(0,"#7a5c00");g.addColorStop(.5,"#fff3b0");g.addColorStop(1,"#7a5c00");}
  if(type==="silver"){g.addColorStop(0,"#7d7d7d");g.addColorStop(.5,"#ffffff");g.addColorStop(1,"#7d7d7d");}
  if(type==="rosegold"){g.addColorStop(0,"#8b5a5a");g.addColorStop(.5,"#f3c1c1");g.addColorStop(1,"#8b5a5a");}
  return g;
}

/* ---------- UTIL ---------- */
function getPos(e){
  const r=canvas.getBoundingClientRect();
  const t=e.touches?e.touches[0]:e;
  return {
    x:(t.clientX-r.left)*(canvas.width/r.width),
    y:(t.clientY-r.top)*(canvas.height/r.height)
  };
}

/* ---------- DRAW ---------- */
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  objects.forEach(o=>{
    ctx.save();
    ctx.translate(o.x+o.w/2,o.y+o.h/2);
    ctx.rotate(o.rotation);
    ctx.translate(-o.w/2,-o.h/2);

    ctx.fillStyle = o.colorType==="metallic"
      ? metallicGradient(o.colorValue,o.w)
      : o.colorValue;

    if(o.type==="shape") drawShape(o);
    if(o.type==="text"){
      ctx.font=`${o.size}px Poppins`;
      ctx.textBaseline="top";
      ctx.fillText(o.text,0,0);
      o.w=ctx.measureText(o.text).width;
      o.h=o.size;
    }

    if(o===selected) drawHandles(o);
    ctx.restore();
  });
}

/* ---------- SHAPES ---------- */
function drawShape(o){
  const w=o.w,h=o.h;
  ctx.beginPath();
  if(o.shape==="rect") ctx.rect(0,0,w,h);
  if(o.shape==="rounded") roundRect(0,0,w,h,20);
  if(o.shape==="circle") ctx.arc(w/2,h/2,w/2,0,Math.PI*2);
  if(o.shape==="oval") ctx.ellipse(w/2,h/2,w/2,h/2,0,0,Math.PI*2);
  if(o.shape==="pill") roundRect(0,0,w,h,h/2);
  if(o.shape==="diamond"){ctx.moveTo(w/2,0);ctx.lineTo(w,h/2);ctx.lineTo(w/2,h);ctx.lineTo(0,h/2);ctx.closePath();}
  if(o.shape==="hexagon"){for(let i=0;i<6;i++){const a=Math.PI/3*i;ctx.lineTo(w/2+w/2*Math.cos(a),h/2+h/2*Math.sin(a));}ctx.closePath();}
  ctx.fill();
}
function roundRect(x,y,w,h,r){
  ctx.moveTo(x+r,y);
  ctx.arcTo(x+w,y,x+w,y+h,r);
  ctx.arcTo(x+w,y+h,x,y+h,r);
  ctx.arcTo(x,y+h,x,y,r);
  ctx.arcTo(x,y,x+w,y,r);
}

/* ---------- HANDLES ---------- */
function drawHandles(o){
  ctx.strokeStyle="#1e90ff";
  ctx.strokeRect(0,0,o.w,o.h);
}

/* ---------- ADD ---------- */
function addShape(s){
  if(!s) return;
  objects=objects.filter(o=>o.type!=="shape");
  const size=canvas.width*0.6;
  selected={type:"shape",shape:s,x:(canvas.width-size)/2,y:(canvas.height-size)/2,w:size,h:size*0.6,rotation:0,colorType:"solid",colorValue:"#000"};
  objects.unshift(selected);
  colorBtn.style.display="block";
  draw();
}
function addText(){
  const t=prompt("Text","Your Name");
  if(!t) return;
  selected={type:"text",text:t,x:canvas.width*0.2,y:canvas.height*0.45,size:canvas.width*0.1,rotation:0,colorType:"solid",colorValue:"#000",w:0,h:0};
  objects.push(selected);
  colorBtn.style.display="block";
  draw();
}
function changeFont(){}

/* ---------- COLORS ---------- */
function toggleColors(){
  colorsDiv.innerHTML="";
  PALETTE.forEach(c=>{
    const d=document.createElement("div");
    d.className="color";
    d.style.background=c.type==="metallic"
      ? c.value==="gold"
        ?"linear-gradient(90deg,#7a5c00,#fff3b0,#7a5c00)"
        :c.value==="silver"
        ?"linear-gradient(90deg,#7d7d7d,#ffffff,#7d7d7d)"
        :"linear-gradient(90deg,#8b5a5a,#f3c1c1,#8b5a5a)"
      :c.value;
    d.onclick=()=>{
      selected.colorType=c.type;
      selected.colorValue=c.value;
      colorsDiv.style.display="none";
      draw();
    };
    colorsDiv.appendChild(d);
  });
  colorsDiv.style.display = colorsDiv.style.display==="block"?"none":"block";
}

/* ---------- SAVE ---------- */
function saveImage(){
  const a=document.createElement("a");
  a.download="design.jpg";
  a.href=canvas.toDataURL("image/jpeg",1);
  a.click();
}

/* ---------- INIT ---------- */
resizeCanvas();
draw();
</script>
</body>
</html>
