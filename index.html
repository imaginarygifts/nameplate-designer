<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Imaginary Gifts â€“ Designer</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins&family=Great+Vibes&family=Dancing+Script&family=Playfair+Display&family=Montserrat&family=Cinzel+Decorative:wght@700&display=swap" rel="stylesheet">

<style>
body{margin:0;background:#000;font-family:Poppins}
#brand{
  text-align:center;padding:30px;font-size:60px;
  font-family:"Cinzel Decorative",serif;
  background:linear-gradient(135deg,#7a5c00,#fff3b0,#7a5c00);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
}
#canvas{
  background:#fff;border:2px solid #000;border-radius:18px;
  display:block;margin:10px auto;touch-action:none;
}
.big-btn{
  width:100%;padding:36px;font-size:26px;
  background:#000;color:#f7f4e9;border:2px solid #f7f4e9;border-radius:14px;
}
.small-btn{
  display:block;margin:10px auto;padding:12px 24px;
  background:#000;color:#fff;border:1px solid #fff;border-radius:10px;
}
.palette{display:none;overflow-x:auto;white-space:nowrap;padding:10px}
.thumb{width:50px;height:50px;border-radius:8px;margin-right:10px;border:2px solid #fff;display:inline-block}
#controls{
  display:grid;grid-template-columns:1fr auto;gap:18px;
  padding:18px;background:#000
}
.control-grid{
  display:grid;grid-template-columns:1fr 1fr;gap:18px;margin-top:18px
}
button,select{
  padding:30px;font-size:22px;
  background:#000;color:#f7f4e9;border:2px solid #f7f4e9;border-radius:14px
}
.right-tools{display:flex;gap:10px}
.mini-btn{
  padding:14px 16px;font-size:50px;
  background:#000;color:#fff;border:2px solid #fff;border-radius:12px
}
</style>
</head>

<body>

<div id="brand">Imaginary Gifts</div>
<canvas id="canvas"></canvas>

<div id="canvasPalette" class="palette"></div>
<button class="small-btn" onclick="toggleCanvasPalette()">Canvas Colour</button>

<div id="colors" class="palette"></div>
<button id="colorBtn" class="big-btn" onclick="toggleColors()">SELECT COLOUR</button>

<div id="controls">
<select onchange="addShape(this.value)">
  <option value="">Select Shape</option>
  <option value="rect">Rectangle</option>
  <option value="rounded">Rounded</option>
  <option value="circle">Circle</option>
  <option value="oval">Oval</option>
  <option value="pill">Pill</option>
  <option value="design6">Design 6</option>
  <option value="design7">Design 7</option>
  <option value="design8">Design 8</option>
  <option value="design9">Design 9</option>
  <option value="design10">Design 10</option>
</select>

<div class="right-tools">
  <button class="mini-btn" onclick="undo()">â†¶</button>
  <button class="mini-btn" onclick="toggleLock()">ðŸ”’</button>
  <button class="mini-btn" onclick="redo()">â†·</button>
</div>
</div>

<div class="control-grid">
<button onclick="addText()">Add Text</button>
<select onchange="changeFont(this.value)">
  <option value="">Select Font</option>
  <option>Cinzel Decorative</option>
  <option>Great Vibes</option>
  <option>Dancing Script</option>
  <option>Playfair Display</option>
  <option>Montserrat</option>
</select>
</div>

<button class="big-btn" onclick="saveImage()">SAVE DESIGN</button>

<script>
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

let canvasBg="#fff",objects=[],selected=null;
let mode=null,sx=0,sy=0,startAngle=0;

const ELEMENT_COLORS=["#000","#fff","#5a3a22","#f7f4e9","#e74c3c","#3498db","#2ecc71","gold","silver","rosegold"];
const CANVAS_BACKGROUNDS=["#fff","#000","#ccc","#5a3a22"];

const SVG_SHAPES={
design6:"M651 730c7,6 18,12 27,1 17,-22 -44,-58 -45,-142...",
design7:"M100 10 L190 60 L100 110 L10 60 Z",
design8:"M100 10 A90 50 0 1 1 99 10",
design9:"M10 10 H190 V110 H10 Z M30 30 H170 V90 H30 Z",
design10:"M100 10 C150 10 190 60 100 110 C10 60 50 10 100 10 Z"
};

function resizeCanvas(){
  canvas.width=Math.min(innerWidth-20,900);
  canvas.height=700;
  draw();
}
addEventListener("resize",resizeCanvas);

function metallic(type,w){
  const g=ctx.createLinearGradient(0,0,w,0);
  if(type==="gold"){g.addColorStop(0,"#7a5c00");g.addColorStop(.5,"#fff3b0");g.addColorStop(1,"#7a5c00")}
  if(type==="silver"){g.addColorStop(0,"#777");g.addColorStop(.5,"#fff");g.addColorStop(1,"#777")}
  if(type==="rosegold"){g.addColorStop(0,"#8b5a5a");g.addColorStop(.5,"#f3c1c1");g.addColorStop(1,"#8b5a5a")}
  return g;
}

/* ðŸ”‘ SVG NORMALIZER */
function drawSvgPath(pathData,w,h){
  const path=new Path2D(pathData);
  ctx.save();
  const BASE=1000;
  ctx.scale(w/BASE,h/BASE);
  ctx.fill(path);
  ctx.restore();
}

function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);
ctx.fillStyle=canvasBg;ctx.fillRect(0,0,canvas.width,canvas.height);

objects.forEach(o=>{
ctx.save();
ctx.translate(o.x+o.w/2,o.y+o.h/2);
ctx.rotate(o.rotation);
ctx.translate(-o.w/2,-o.h/2);

if(o.type==="shape"){
ctx.fillStyle=["gold","silver","rosegold"].includes(o.color)?metallic(o.color,o.w):o.color;
if(SVG_SHAPES[o.shape]) drawSvgPath(SVG_SHAPES[o.shape],o.w,o.h);
else if(o.shape==="rect") ctx.fillRect(0,0,o.w,o.h);
else if(o.shape==="circle"){ctx.beginPath();ctx.arc(o.w/2,o.h/2,o.w/2,0,Math.PI*2);ctx.fill()}
}

if(o.type==="text"){
ctx.font=`${o.size}px ${o.font}`;
o.w=ctx.measureText(o.text).width;o.h=o.size;
ctx.fillStyle=["gold","silver","rosegold"].includes(o.color)?metallic(o.color,o.w):o.color;
ctx.fillText(o.text,0,0);
}

if(o===selected){
ctx.strokeStyle=o.locked?"#999":"#1e90ff";
ctx.strokeRect(0,0,o.w,o.h);
}
ctx.restore();
});
}

function addShape(s){
if(!s)return;
const w=canvas.width*0.5;
selected={type:"shape",shape:s,x:canvas.width/4,y:canvas.height/4,w:w,h:w*0.6,rotation:0,color:"#000",locked:false};
objects.push(selected);draw();
}
function addText(){
const t=prompt("Text","Your Name");if(!t)return;
selected={type:"text",text:t,font:"Cinzel Decorative",size:80,x:200,y:200,color:"gold",rotation:0,locked:false};
objects.push(selected);draw();
}
function changeFont(f){if(selected&&selected.type==="text"){selected.font=f;draw()}}
function toggleLock(){if(selected){selected.locked=!selected.locked;draw()}}

function toggleColors(){
const c=document.getElementById("colors");c.innerHTML="";
ELEMENT_COLORS.forEach(col=>{
const d=document.createElement("div");d.className="thumb";
d.style.background=col==="gold"?"linear-gradient(135deg,#7a5c00,#fff3b0,#7a5c00)":
col==="silver"?"linear-gradient(135deg,#777,#fff,#777)":
col==="rosegold"?"linear-gradient(135deg,#8b5a5a,#f3c1c1,#8b5a5a)":col;
d.onclick=()=>{selected.color=col;c.style.display="none";draw()};
c.appendChild(d);
});
c.style.display=c.style.display==="block"?"none":"block";
}

function toggleCanvasPalette(){
const p=document.getElementById("canvasPalette");p.innerHTML="";
CANVAS_BACKGROUNDS.forEach(c=>{
const d=document.createElement("div");d.className="thumb";d.style.background=c;
d.onclick=()=>{canvasBg=c;p.style.display="none";draw()};
p.appendChild(d);
});
p.style.display=p.style.display==="block"?"none":"block";
}

function saveImage(){
const a=document.createElement("a");
a.download="design.jpg";
a.href=canvas.toDataURL("image/jpeg",1);
a.click();
}

resizeCanvas();draw();
</script>
</body>
</html>