<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Imaginary Gifts â€“ Designer</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins&family=Great+Vibes&family=Dancing+Script&family=Playfair+Display&family=Montserrat&family=Cinzel+Decorative:wght@700&display=swap" rel="stylesheet">

<style>
body{margin:0;background:#000;font-family:Poppins}
#brand{
  background:#000;text-align:center;padding:30px;font-size:60px;
  font-family:"Cinzel Decorative",serif;
  background-image:linear-gradient(135deg,#7a5c00,#fff3b0,#7a5c00);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
}
#canvas{
  background:#fff;border:2px solid #000;border-radius:18px;
  display:block;margin:10px auto;touch-action:none;
}
.big-btn{
  width:100%;padding:36px;font-size:26px;background:#000;color:#f7f4e9;
  border:2px solid #f7f4e9;border-radius:14px;margin:10px auto;
}
.small-btn{
  padding:12px 24px;font-size:14px;background:#000;color:#fff;
  border:1px solid #fff;border-radius:10px;margin:10px auto;display:block;
}
.palette{
  display:none;overflow-x:auto;white-space:nowrap;padding:10px;
}
.thumb{
  width:50px;height:50px;border-radius:8px;border:2px solid #fff;
  display:inline-block;margin-right:10px;
}
.logo-thumb{
  width:200px;height:200px;border-radius:14px;
  display:inline-flex;justify-content:center;align-items:center;
  background:#fff;border:2px solid #fff;margin-right:14px;
}
.logo-thumb img{max-width:90%;max-height:90%}
#controls{
  background:#000;padding:18px;display:grid;
  grid-template-columns:1fr auto;gap:18px;align-items:center;
}
.control-grid{
  display:grid;grid-template-columns:1fr 1fr;gap:18px;margin-top:18px;
}
button,select{
  padding:30px;font-size:22px;background:#000;color:#f7f4e9;
  border:2px solid #f7f4e9;border-radius:14px;
}
.right-tools{display:flex;gap:10px}
.mini-btn{
  padding:28px 32px;font-size:40px;background:#000;color:#fff;
  border:2px solid #fff;border-radius:18px;
}
</style>
</head>

<body>
<div id="brand">Imaginary Gifts</div>
<canvas id="canvas"></canvas>

<div id="colors" class="palette"></div>
<button id="colorBtn" class="big-btn" style="display:none" onclick="toggleColors()">SELECT COLOUR</button>

<div id="controls">
<select onchange="addShape(this.value)">
  <option value="">Select Shape</option>
  <option value="rect">Rectangle</option>
  <option value="rounded">Rounded</option>
  <option value="circle">Circle</option>
</select>
<div class="right-tools">
  <button class="mini-btn" onclick="undo()">â†¶</button>
  <button class="mini-btn" onclick="toggleLock()">ðŸ”’</button>
  <button class="mini-btn" onclick="redo()">â†·</button>
</div>
</div>

<div class="control-grid">
<button onclick="addText()">Add Text</button>
<select onchange="changeFont(this.value)">
  <option value="">Select Font</option>
  <option>Cinzel Decorative</option>
  <option>Great Vibes</option>
  <option>Dancing Script</option>
  <option>Playfair Display</option>
  <option>Montserrat</option>
</select>
</div>

<div class="control-grid">
<button onclick="toggleLogoPalette()">Add Logo</button>
<button onclick="toggleBorderPalette()">Add Border</button>
</div>

<div id="logoPalette" class="palette"></div>
<div id="borderPalette" class="palette"></div>

<button class="big-btn" onclick="saveImage()">SAVE DESIGN</button>

<script>
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
canvas.width=Math.min(innerWidth-20,900);
canvas.height=700;

let objects=[],selected=null,mode=null,sx=0,sy=0,startAngle=0;
let history=[],redoStack=[];

const COLORS=["#000","#fff","gold","silver","rosegold"];

const LOGOS=[
 "https://upload.wikimedia.org/wikipedia/commons/6/6e/Om_symbol.svg",
 "https://upload.wikimedia.org/wikipedia/commons/3/3b/Ganesha_outline.svg",
 "https://upload.wikimedia.org/wikipedia/commons/8/8f/Buddha_outline.svg"
];
const BORDERS=[
 "https://upload.wikimedia.org/wikipedia/commons/2/29/Decorative_border_1.svg",
 "https://upload.wikimedia.org/wikipedia/commons/5/5a/Decorative_border_2.svg"
];

function saveState(){history.push(JSON.stringify(objects));redoStack=[];}
function undo(){if(!history.length)return;redoStack.push(JSON.stringify(objects));objects=JSON.parse(history.pop());draw();}
function redo(){if(!redoStack.length)return;history.push(JSON.stringify(objects));objects=JSON.parse(redoStack.pop());draw();}

function metallic(type,w){
 const g=ctx.createLinearGradient(0,0,w,0);
 if(type==="gold"){g.addColorStop(0,"#7a5c00");g.addColorStop(.5,"#fff3b0");g.addColorStop(1,"#7a5c00");}
 if(type==="silver"){g.addColorStop(0,"#777");g.addColorStop(.5,"#fff");g.addColorStop(1,"#777");}
 if(type==="rosegold"){g.addColorStop(0,"#8b5a5a");g.addColorStop(.5,"#f3c1c1");g.addColorStop(1,"#8b5a5a");}
 return g;
}

function draw(){
 ctx.clearRect(0,0,canvas.width,canvas.height);
 objects.forEach(o=>{
  ctx.save();
  ctx.translate(o.x+o.w/2,o.y+o.h/2);
  ctx.rotate(o.rotation);
  ctx.translate(-o.w/2,-o.h/2);

  if(o.type==="text"){
   ctx.font=`${o.size}px ${o.font}`;
   o.w=ctx.measureText(o.text).width;o.h=o.size;
   ctx.fillStyle=["gold","silver","rosegold"].includes(o.color)?metallic(o.color,o.w):o.color;
   ctx.fillText(o.text,0,0);
  }
  if(o.type==="logo"||o.type==="border") ctx.drawImage(o.img,0,0,o.w,o.h);

  if(o===selected) drawHandles(o);
  ctx.restore();
 });
}

function drawHandles(o){
 ctx.strokeStyle="#1e90ff";
 ctx.strokeRect(0,0,o.w,o.h);
 drawIcon(-18,-18,"Ã—");
 drawIcon(o.w+18,-18,"â†»");
 drawIcon(o.w+18,o.h+18,"â†”");
}
function drawIcon(x,y,t){
 ctx.beginPath();ctx.arc(x,y,14,0,Math.PI*2);
 ctx.fillStyle="#fff";ctx.fill();ctx.stroke();
 ctx.fillStyle="#000";ctx.fillText(t,x-6,y+6);
}

function addText(){
 saveState();
 selected={type:"text",text:"Your Name",font:"Cinzel Decorative",
 size:80,x:200,y:200,rotation:0,color:"gold",locked:false};
 objects.push(selected);draw();
}

function loadImage(url,type){
 saveState();
 const img=new Image();img.crossOrigin="anonymous";
 img.onload=()=>{
  selected={type, img, x:200,y:200,w:300,h:300*(img.height/img.width),
   rotation:0,color:"gold",locked:false};
  objects.push(selected);draw();
 };
 img.src=url;
}

function toggleLogoPalette(){
 const p=document.getElementById("logoPalette");p.innerHTML="";
 LOGOS.forEach(u=>{
  const d=document.createElement("div");d.className="logo-thumb";
  const i=document.createElement("img");i.src=u;d.appendChild(i);
  d.onclick=()=>{loadImage(u,"logo");p.style.display="none"};
  p.appendChild(d);
 });
 p.style.display="block";
}
function toggleBorderPalette(){
 const p=document.getElementById("borderPalette");p.innerHTML="";
 BORDERS.forEach(u=>{
  const d=document.createElement("div");d.className="logo-thumb";
  const i=document.createElement("img");i.src=u;d.appendChild(i);
  d.onclick=()=>{loadImage(u,"border");p.style.display="none"};
  p.appendChild(d);
 });
 p.style.display="block";
}

canvas.onmousedown=e=>{
 const r=canvas.getBoundingClientRect();
 const x=e.clientX-r.left,y=e.clientY-r.top;
 selected=objects.findLast(o=>x>o.x&&x<o.x+o.w&&y>o.y&&y<o.y+o.h);
 if(selected){mode="move";sx=x;sy=y;}
};
canvas.onmousemove=e=>{
 if(!selected||!mode)return;
 const r=canvas.getBoundingClientRect();
 const x=e.clientX-r.left,y=e.clientY-r.top;
 selected.x+=x-sx;selected.y+=y-sy;sx=x;sy=y;draw();
};
canvas.onmouseup=()=>mode=null;

function saveImage(){
 const a=document.createElement("a");
 a.href=canvas.toDataURL("image/jpeg",1);
 a.download="design.jpg";a.click();
}
draw();
</script>
</body>
</html>
