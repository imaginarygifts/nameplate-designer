<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Imaginary Gifts â€“ Designer</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins&family=Great+Vibes&family=Dancing+Script&family=Playfair+Display&family=Montserrat&family=Cinzel+Decorative:wght@700&display=swap" rel="stylesheet">

<style>
body{margin:0;background:#000;font-family:Poppins}

/* LOGO */
#brand{
  background:#000;text-align:center;padding:30px;
  font-size:60px;font-family:"Cinzel Decorative",serif;
  background-image:linear-gradient(135deg,#7a5c00,#fff3b0,#7a5c00);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
}

/* CANVAS */
#canvas{
  background:#fff;
  border:2px solid #000;
  border-radius:18px;
  display:block;
  margin:10px auto;
  touch-action:none;
}

/* BIG BUTTON */
.big-btn{
  width:100%;
  margin:10px auto;
  padding:36px;
  font-size:26px;
  background:#000;
  color:#f7f4e9;
  border:2px solid #f7f4e9;
  border-radius:14px;
  display:none;
}

/* SMALL BUTTON */
.small-btn{
  width:160px;
  margin:10px auto;
  padding:12px;
  font-size:14px;
  background:#000;
  color:#fff;
  border:1px solid #fff;
  border-radius:10px;
  display:block;
}

/* PALETTE */
.palette{
  display:none;
  overflow-x:auto;
  white-space:nowrap;
  padding:10px;
}
.thumb{
  width:50px;
  height:50px;
  display:inline-block;
  border-radius:8px;
  margin-right:10px;
  border:2px solid #fff;
  background-size:cover;
  background-position:center;
}

/* CONTROLS */
#controls{
  background:#000;
  padding:18px;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:18px;
}
button,select{
  padding:30px;
  font-size:22px;
  background:#000;
  color:#f7f4e9;
  border:2px solid #f7f4e9;
  border-radius:14px;
}
</style>
</head>

<body>

<div id="brand">Imaginary Gifts</div>

<canvas id="canvas"></canvas>

<!-- CANVAS BACKGROUND PALETTE -->
<div id="canvasPalette" class="palette"></div>
<button class="small-btn" onclick="toggleCanvasPalette()">Canvas Colour</button>

<!-- ELEMENT COLOR -->
<div id="colors" class="palette"></div>
<button id="colorBtn" class="big-btn" onclick="toggleColors()">SELECT COLOUR</button>

<div id="controls">
  <select onchange="addShape(this.value)">
    <option value="">Select Shape</option>
    <option value="rect">Rectangle</option>
    <option value="rounded">Rounded</option>
    <option value="circle">Circle</option>
    <option value="oval">Oval</option>
    <option value="pill">Pill</option>
  </select>

  <button onclick="toggleLock()">ðŸ”’ Lock / Unlock</button>
  <button onclick="addText()">Add Text</button>

  <select onchange="changeFont(this.value)">
    <option value="">Select Font</option>
    <option>Cinzel Decorative</option>
    <option>Great Vibes</option>
    <option>Dancing Script</option>
    <option>Playfair Display</option>
    <option>Montserrat</option>
  </select>
</div>

<button class="big-btn" style="display:block" onclick="saveImage()">SAVE DESIGN</button>

<script>
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

let canvasBg="#fff";
let canvasBgImg=null;

let objects=[],selected=null;
let mode=null,sx=0,sy=0,startAngle=0;
let lastTap=0;

const ELEMENT_COLORS=["#000","#fff","#5a3a22","#f7f4e9","#e74c3c","#3498db","#2ecc71","gold","silver","rosegold"];

const CANVAS_BACKGROUNDS=[
  {type:"color",value:"#ffffff"},
  {type:"color",value:"#000000"},
  {type:"color",value:"#cccccc"},
  {type:"color",value:"#5a3a22"},
  {type:"img",value:"https://images.unsplash.com/photo-1600585154340-be6161a56a0c"},
  {type:"img",value:"https://images.unsplash.com/photo-1587300003388-59208cc962cb"},
  {type:"img",value:"https://images.unsplash.com/photo-1542889601-399c4f3a8402"}
];

function resizeCanvas(){
  canvas.width=Math.min(innerWidth-20,900);
  canvas.height=700;
  draw();
}
addEventListener("resize",resizeCanvas);

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  if(canvasBgImg){
    ctx.drawImage(canvasBgImg,0,0,canvas.width,canvas.height);
  }else{
    ctx.fillStyle=canvasBg;
    ctx.fillRect(0,0,canvas.width,canvas.height);
  }

  objects.forEach(o=>{
    ctx.save();
    ctx.translate(o.x+o.w/2,o.y+o.h/2);
    ctx.rotate(o.rotation);
    ctx.translate(-o.w/2,-o.h/2);

    if(o.type==="shape"){
      ctx.fillStyle=o.color;
      ctx.fillRect(0,0,o.w,o.h);
    }

    if(o.type==="text"){
      ctx.font=`${o.size}px ${o.font}`;
      ctx.textBaseline="top";
      o.w=ctx.measureText(o.text).width;
      o.h=o.size;
      ctx.fillStyle=o.color;
      ctx.fillText(o.text,0,0);
    }

    if(o===selected){
      ctx.strokeStyle="#1e90ff";
      ctx.strokeRect(0,0,o.w,o.h);
    }
    ctx.restore();
  });
}

/* CANVAS BG PALETTE */
function toggleCanvasPalette(){
  const p=document.getElementById("canvasPalette");
  p.innerHTML="";
  CANVAS_BACKGROUNDS.forEach(b=>{
    const d=document.createElement("div");
    d.className="thumb";
    if(b.type==="color") d.style.background=b.value;
    else d.style.backgroundImage=`url(${b.value})`;
    d.onclick=()=>{
      if(b.type==="color"){
        canvasBg=b.value;
        canvasBgImg=null;
      }else{
        const img=new Image();
        img.crossOrigin="anonymous";
        img.onload=()=>{canvasBgImg=img;draw();}
        img.src=b.value;
      }
      p.style.display="none";
      draw();
    };
    p.appendChild(d);
  });
  p.style.display=p.style.display==="block"?"none":"block";
}

/* BASIC FUNCTIONS */
function addShape(s){
  if(!s)return;
  objects=objects.filter(o=>o.type!=="shape");
  const w=canvas.width*0.6;
  selected={type:"shape",shape:s,x:(canvas.width-w)/2,y:(canvas.height-(w*0.6))/2,w:w,h:w*0.6,rotation:0,color:"#000",locked:false};
  objects.push(selected);
  document.getElementById("colorBtn").style.display="block";
  draw();
}

function addText(){
  const t=prompt("Text","Your Name");
  if(!t)return;
  selected={type:"text",text:t,font:"Cinzel Decorative",size:canvas.width*0.08,x:canvas.width*0.2,y:canvas.height*0.45,rotation:0,color:"#000",locked:false};
  objects.push(selected);
  document.getElementById("colorBtn").style.display="block";
  draw();
}

function changeFont(f){if(selected&&selected.type==="text"){selected.font=f;draw();}}
function toggleLock(){if(selected){selected.locked=!selected.locked;draw();}}

function toggleColors(){
  const c=document.getElementById("colors");
  c.innerHTML="";
  ELEMENT_COLORS.forEach(col=>{
    const d=document.createElement("div");
    d.className="thumb";
    d.style.background=col;
    d.onclick=()=>{selected.color=col;c.style.display="none";draw();}
    c.appendChild(d);
  });
  c.style.display=c.style.display==="block"?"none":"block";
}

function saveImage(){
  const a=document.createElement("a");
  a.download="design.jpg";
  a.href=canvas.toDataURL("image/jpeg",1);
  a.click();
}

resizeCanvas();
draw();
</script>

</body>
</html>
