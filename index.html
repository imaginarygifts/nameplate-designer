<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Imaginary Gifts â€“ Designer</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins&family=Great+Vibes&family=Dancing+Script&family=Playfair+Display&family=Montserrat&family=Cinzel+Decorative:wght@700&display=swap" rel="stylesheet">

<style>
body{margin:0;background:#000;font-family:Poppins}

/* LOGO */
#brand{
  background:#000;
  text-align:center;
  padding:30px;
  font-size:60px;
  font-family:"Cinzel Decorative",serif;
  background-image:linear-gradient(135deg,#7a5c00,#fff3b0,#7a5c00);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

/* CANVAS */
#canvas{
  background:#fff;
  border:2px solid #000;
  border-radius:18px;
  display:block;
  margin:10px auto;
  touch-action:none;
}

/* BUTTONS */
.big-btn{
  width:100%;
  margin:10px auto;
  padding:36px;
  font-size:26px;
  background:#000;
  color:#f7f4e9;
  border:2px solid #f7f4e9;
  border-radius:14px;
  display:none;
}
.small-btn{
  display:block;
  margin:10px auto;
  padding:12px 24px;
  font-size:14px;
  background:#000;
  color:#fff;
  border:1px solid #fff;
  border-radius:10px;
}

/* MINI TOOLS */
.right-tools{display:flex;gap:10px}
.mini-btn{
  padding:14px 16px;
  font-size:50px;
  background:#000;
  color:#fff;
  border:2px solid #fff;
  border-radius:12px;
}

/* PALETTE */
.palette{
  display:none;
  overflow-x:auto;
  white-space:nowrap;
  padding:10px;
  text-align:center;
}
.thumb{
  width:50px;height:50px;
  display:inline-block;
  border-radius:8px;
  margin-right:10px;
  border:2px solid #fff;
}

/* CONTROLS */
#controls{
  background:#000;
  padding:18px;
  display:grid;
  grid-template-columns:1fr auto;
  gap:18px;
  align-items:center;
}
.control-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:18px;
  margin-top:18px;
}
button,select{
  padding:30px;
  font-size:22px;
  background:#000;
  color:#f7f4e9;
  border:2px solid #f7f4e9;
  border-radius:14px;
}
</style>
</head>

<body>

<div id="brand">Imaginary Gifts</div>
<canvas id="canvas"></canvas>

<div id="canvasPalette" class="palette"></div>
<button class="small-btn" onclick="toggleCanvasPalette()">Canvas Colour</button>

<div id="colors" class="palette"></div>
<button id="colorBtn" class="big-btn" onclick="toggleColors()">SELECT COLOUR</button>

<div id="controls">
  <select onchange="addShape(this.value)">
    <option value="">Select Shape</option>
    <option value="rect">Rectangle</option>
    <option value="rounded">Rounded</option>
    <option value="circle">Circle</option>
    <option value="oval">Oval</option>
    <option value="pill">Pill</option>
    <option value="design6">Design 6</option>
    <option value="design7">Design 7</option>
    <option value="design8">Design 8</option>
    <option value="design9">Design 9</option>
    <option value="design10">Design 10</option>
  </select>

  <div class="right-tools">
    <button class="mini-btn" onclick="undo()">â†¶</button>
    <button class="mini-btn" onclick="toggleLock()">ðŸ”’</button>
    <button class="mini-btn" onclick="redo()">â†·</button>
  </div>
</div>

<div class="control-grid">
  <button onclick="addText()">Add Text</button>
  <select onchange="changeFont(this.value)">
    <option value="">Select Font</option>
    <option>Cinzel Decorative</option>
    <option>Great Vibes</option>
    <option>Dancing Script</option>
    <option>Playfair Display</option>
    <option>Montserrat</option>
  </select>
</div>

<button class="big-btn" style="display:block" onclick="saveImage()">SAVE DESIGN</button>

<script>
/* ---------- CORE ---------- */
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

let canvasBg="#fff";
let objects=[],selected=null;
let mode=null,sx=0,sy=0,startAngle=0,lastTapTime=0;

/* ---------- HISTORY ---------- */
let history=[],redoStack=[];
function saveState(){
  history.push(JSON.stringify({objects,canvasBg}));
  if(history.length>50) history.shift();
  redoStack=[];
}
function undo(){
  if(!history.length) return;
  redoStack.push(JSON.stringify({objects,canvasBg}));
  const s=JSON.parse(history.pop());
  objects=s.objects;canvasBg=s.canvasBg;selected=null;draw();
}
function redo(){
  if(!redoStack.length) return;
  history.push(JSON.stringify({objects,canvasBg}));
  const s=JSON.parse(redoStack.pop());
  objects=s.objects;canvasBg=s.canvasBg;selected=null;draw();
}

/* ---------- CONSTANTS ---------- */
const ELEMENT_COLORS=["#000","#fff","#5a3a22","#f7f4e9","#e74c3c","#3498db","#2ecc71","gold","silver","rosegold"];
const CANVAS_BACKGROUNDS=["#ffffff","#000000","#cccccc","#5a3a22"];

/* ---------- SVG STYLE SHAPES (PATHS) ---------- */
const SVG_SHAPES={
  design6:"design_swastik: `
M13851 12741
c69 69 192 135 285 17
182 -232 -472 -613 -477 -1504
-4 -391 65 -891 157 -1114
91 -222 322 -394 541 -393
174 0 312 136 309 304
-2 159 -159 302 -307 302
-173 0 -322 -149 -322 -322
0 -185 129 -310 305 -310
107 0 195 89 195 198
0 120 -96 213 -216 213
-118 0 -213 -95 -213 -213
0 -136 102 -238 238 -238
146 0 259 114 259 260
0 148 -112 262 -261 262
-154 0 -279 -125 -279 -279
0 -172 139 -311 311 -311
180 0 326 146 326 326
0 187 -152 339 -339 339
-195 0 -353 -158 -353 -353
0 -203 164 -367 367 -367
212 0 384 172 384 384
0 220 -178 398 -398 398
-229 0 -415 -186 -415 -415
0 -237 192 -429 429 -429
245 0 444 199 444 444
0 254 -206 460 -460 460
-262 0 -475 -213 -475 -475
0 -271 219 -490 490 -490
279 0 506 227 506 506
0 288 -233 521 -521 521
-296 0 -536 -240 -536 -536
0 -305 247 -552 552 -552
313 0 567 254 567 567
0 322 -261 583 -583 583
-331 0 -599 -268 -599 -599
0 -339 275 -614 614 -614
347 0 629 282 629 629
0 356 -288 644 -644 644
-364 0 -659 -295 -659 -659
0 -373 302 -675 675 -675
381 0 690 309 690 690
0 390 -316 706 -706 706
-398 0 -721 -323 -721 -721
0 -407 330 -737 737 -737
415 0 752 337 752 752
0 424 -344 767 -767 767
-433 0 -783 -350 -783 -783
0 -441 357 -798 798 -798
449 0 813 364 813 813
0 458 -371 829 -829 829
-466 0 -844 -378 -844 -844
0 -475 385 -859 859 -859
483 0 875 392 875 875
0 492 -399 890 -890 890
-500 0 -906 -406 -906 -906
0 -509 413 -921 921 -921
517 0 936 419 936 936
0 525 -426 951 -951 951
-533 0 -966 -433 -966 -966
0 -542 440 -982 982 -982
550 0 997 447 997 997
0 558 -454 1012 -1012 1012
-566 0 -1027 -461 -1027 -1027
0 -575 468 -1043 1043 -1043
583 0 1058 475 1058 1058
0 591 -482 1073 -1073 1073
-599 0 -1088 -489 -1088 -1088
0 -608 496 -1104 1104 -1104
616 0 1119 503 1119 1119
0 624 -510 1134 -1134 1134
-632 0 -1149 -517 -1149 -1149
0 -641 524 -1165 1165 -1165
649 0 1180 531 1180 1180
0 657 -538 1195 -1195 1195
-665 0 -1210 -545 -1210 -1210
0 -674 552 -1226 1226 -1226
682 0 1241 559 1241 1241
0 690 -566 1256 -1256 1256
-698 0 -1271 -573 -1271 -1271
0 -707 580 -1287 1287 -1287
715 0 1302 587 1302 1302
0 723 -594 1317 -1317 1317
-731 0 -1332 -601 -1332 -1332
0 -740 608 -1348 1348 -1348
748 0 1363 615 1363 1363
0 756 -622 1378 -1378 1378
-764 0 -1393 -629 -1393 -1393
0 -773 636 -1409 1409 -1409
781 0 1424 643 1424 1424
0 789 -650 1439 -1439 1439
-797 0 -1454 -657 -1454 -1454
0 -806 664 -1470 1470 -1470
814 0 1485 671 1485 1485
0 822 -678 1500 -1500 1500
-830 0 -1515 -685 -1515 -1515
0 -839 692 -1531 1531 -1531
847 0 1546 699 1546 1546
0 855 -706 1561 -1561 1561
-863 0 -1576 -713 -1576 -1576
0 -872 720 -1592 1592 -1592
880 0 1607 727 1607 1607
0 888 -734 1622 -1622 1622
-896 0 -1637 -741 -1637 -1637
0 -905 748 -1653 1653 -1653
913 0 1668 755 1668 1668
0 921 -762 1683 -1683 1683
-929 0 -1698 -769 -1698 -1698
0 -938 776 -1714 1714 -1714
946 0 1729 783 1729 1729
0 954 -790 1744 -1744 1744
-962 0 -1759 -797 -1759 -1759
0 -971 804 -1775 1775 -1775
979 0 1790 811 1790 1790
0 987 -818 1805 -1805 1805
-995 0 -1820 -825 -1820 -1820
0 -1004 832 -1836 1836 -1836
1012 0 1851 839 1851 1851
0 1020 -846 1866 -1866 1866
-1028 0 -1881 -853 -1881 -1881
0 -1037 860 -1897 1897 -1897
1045 0 1912 867 1912 1912
0 1053 -874 1927 -1927 1927
-1061 0 -1942 -881 -1942 -1942
0 -1070 888 -1958 1958 -1958
1078 0 1973 895 1973 1973
0 1086 -902 1988 -1988 1988
-1094 0 -2003 -909 -2003 -2003
0 -1103 916 -2019 2019 -2019
1111 0 2034 923 2034 2034
0 1119 -930 2049 -2049 2049
-1127 0 -2064 -937 -2064 -2064
0 -1136 944 -2080 2080 -2080
1144 0 2095 951 2095 2095
0 1152 -958 2110 -2110 2110
-1160 0 -2125 -965 -2125 -2125
0 -1169 972 -2141 2141 -2141
1177 0 2156 979 2156 2156
0 1185 -986 2171 -2171 2171
-1193 0 -2186 -993 -2186 -2186
0 -1202 1000 -2202 2202 -2202
1210 0 2217 1007 2217 2217
0 1218 -1014 2232 -2232 2232
-1226 0 -2247 -1021 -2247 -2247
0 -1235 1028 -2263 2263 -2263
1243 0 2278 1035 2278 2278
0 1251 -1042 2293 -2293 2293
-1259 0 -2308 -1049 -2308 -2308
0 -1268 1056 -2324 2324 -2324
1276 0 2339 1063 2339 2339
0 1284 -1070 2354 -2354 2354
-1292 0 -2369 -1077 -2369 -2369
0 -1301 1084 -2385 2385 -2385
1309 0 2400 1091 2400 2400
z",
  design7:"M100 10 L190 60 L100 110 L10 60 Z",
  design8:"M100 10 A90 50 0 1 1 99 10",
  design9:"M10 10 H190 V110 H10 Z M30 30 H170 V90 H30 Z",
  design10:"M100 10 C150 10 190 60 100 110 C10 60 50 10 100 10 Z"
};

/* ---------- CANVAS SIZE ---------- */
function resizeCanvas(){
  canvas.width=Math.min(innerWidth-20,900);
  canvas.height=700;
  draw();
}
addEventListener("resize",resizeCanvas);

/* ---------- METALLIC ---------- */
function metallic(type,w){
  const g=ctx.createLinearGradient(0,0,w,0);
  if(type==="gold"){g.addColorStop(0,"#7a5c00");g.addColorStop(.5,"#fff3b0");g.addColorStop(1,"#7a5c00");}
  if(type==="silver"){g.addColorStop(0,"#777");g.addColorStop(.5,"#fff");g.addColorStop(1,"#777");}
  if(type==="rosegold"){g.addColorStop(0,"#8b5a5a");g.addColorStop(.5,"#f3c1c1");g.addColorStop(1,"#8b5a5a");}
  return g;
}

/* ---------- DRAW ---------- */
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle=canvasBg;
  ctx.fillRect(0,0,canvas.width,canvas.height);

  objects.forEach(o=>{
    ctx.save();
    ctx.translate(o.x+o.w/2,o.y+o.h/2);
    ctx.rotate(o.rotation);
    ctx.translate(-o.w/2,-o.h/2);

    if(o.type==="shape"){
      ctx.fillStyle=["gold","silver","rosegold"].includes(o.color)?metallic(o.color,o.w):o.color;
      drawShape(o);
    }

    if(o.type==="text"){
      ctx.font=`${o.size}px ${o.font}`;
      ctx.textBaseline="top";
      o.w=ctx.measureText(o.text).width;
      o.h=o.size;
      ctx.fillStyle=["gold","silver","rosegold"].includes(o.color)?metallic(o.color,o.w):o.color;
      ctx.fillText(o.text,0,0);
    }

    if(o===selected) drawHandles(o);
    ctx.restore();
  });
}

/* ---------- SHAPES ---------- */
function drawShape(o){
  ctx.beginPath();

  if(o.shape==="rect") ctx.rect(0,0,o.w,o.h);
  else if(o.shape==="rounded") roundRect(0,0,o.w,o.h,20);
  else if(o.shape==="circle") ctx.arc(o.w/2,o.h/2,o.w/2,0,Math.PI*2);
  else if(o.shape==="oval") ctx.ellipse(o.w/2,o.h/2,o.w/2,o.h/2,0,0,Math.PI*2);
  else if(o.shape==="pill") roundRect(0,0,o.w,o.h,o.h/2);
  else if(SVG_SHAPES[o.shape]){
    const path=new Path2D(SVG_SHAPES[o.shape]);
    ctx.save();
    ctx.scale(o.w/400000,o.h/400000);
    ctx.fill(path);
    ctx.restore();
  }

  ctx.fill();
}
function roundRect(x,y,w,h,r){
  ctx.moveTo(x+r,y);
  ctx.arcTo(x+w,y,x+w,y+h,r);
  ctx.arcTo(x+w,y+h,x,y+h,r);
  ctx.arcTo(x,y+h,x,y,r);
  ctx.arcTo(x,y,x+w,y,r);
}

/* ---------- HANDLES ---------- */
function drawIcon(x,y,t){
  ctx.beginPath();
  ctx.arc(x,y,14,0,Math.PI*2);
  ctx.fillStyle="#fff";ctx.fill();ctx.stroke();
  ctx.fillStyle="#000";ctx.font="16px Poppins";
  ctx.fillText(t,x-6,y+6);
}
function drawHandles(o){
  ctx.strokeStyle=o.locked?"#999":"#1e90ff";
  ctx.strokeRect(0,0,o.w,o.h);
  if(o.locked){drawIcon(o.w/2,-22,"ðŸ”’");return;}
  drawIcon(-18,-18,"Ã—");
  drawIcon(o.w+18,-18,"â†»");
  drawIcon(o.w+18,o.h+18,"â†”");
}

/* ---------- INTERACTION ---------- */
function getPos(e){
  const r=canvas.getBoundingClientRect();
  const t=e.touches?e.touches[0]:e;
  return{x:(t.clientX-r.left)*(canvas.width/r.width),y:(t.clientY-r.top)*(canvas.height/r.height)};
}

canvas.onmousedown=canvas.ontouchstart=e=>{
  saveState();e.preventDefault();
  const p=getPos(e);
  selected=null;mode=null;

  for(let i=objects.length-1;i>=0;i--){
    const o=objects[i];
    const cx=o.x+o.w/2,cy=o.y+o.h/2;
    const dx=p.x-cx,dy=p.y-cy;
    const cos=Math.cos(-o.rotation),sin=Math.sin(-o.rotation);
    const rx=cos*dx-sin*dy+o.w/2;
    const ry=sin*dx+cos*dy+o.h/2;

    if(!o.locked&&Math.hypot(rx+18,ry+18)<14){objects.splice(i,1);draw();return;}
    if(!o.locked&&Math.hypot(rx-(o.w+18),ry+18)<14){selected=o;mode="rotate";startAngle=Math.atan2(p.y-cy,p.x-cx)-o.rotation;break;}
    if(!o.locked&&Math.hypot(rx-(o.w+18),ry-(o.h+18))<14){selected=o;mode="resize";sx=p.x;sy=p.y;break;}
    if(rx>0&&rx<o.w&&ry>0&&ry<o.h){selected=o;if(!o.locked){mode="move";sx=p.x;sy=p.y;}break;}
  }

  colorBtn.style.display=selected?"block":"none";
  draw();
};

canvas.onmousemove=canvas.ontouchmove=e=>{
  if(!selected||!mode||selected.locked)return;
  e.preventDefault();
  const p=getPos(e);

  if(mode==="move"){selected.x+=p.x-sx;selected.y+=p.y-sy;}
  if(mode==="resize"){
    selected.w+=p.x-sx;
    selected.h+=p.y-sy;
    if(selected.type==="text") selected.size+=(p.y-sy)*0.5;
  }
  if(mode==="rotate"){
    const cx=selected.x+selected.w/2,cy=selected.y+selected.h/2;
    selected.rotation=Math.atan2(p.y-cy,p.x-cx)-startAngle;
  }

  sx=p.x;sy=p.y;draw();
};

canvas.onmouseup=canvas.ontouchend=()=>mode=null;

/* ---------- CONTROLS ---------- */
function addShape(s){
  saveState();
  if(!s)return;
  objects=objects.filter(o=>o.type!=="shape");
  const w=canvas.width*0.6;
  selected={type:"shape",shape:s,x:(canvas.width-w)/2,y:(canvas.height-w*0.6)/2,w:w,h:w*0.6,rotation:0,color:"#000",locked:false};
  objects.push(selected);
  colorBtn.style.display="block";
  draw();
}
function addText(){
  saveState();
  const t=prompt("Text","Your Name");
  if(!t)return;
  selected={type:"text",text:t,font:"Cinzel Decorative",size:canvas.width*0.08,x:canvas.width*0.2,y:canvas.height*0.45,rotation:0,color:"gold",locked:false};
  objects.push(selected);
  colorBtn.style.display="block";
  draw();
}
function changeFont(f){saveState();if(selected&&selected.type==="text"){selected.font=f;draw();}}
function toggleLock(){saveState();if(selected){selected.locked=!selected.locked;draw();}}

function toggleColors(){
  const c=document.getElementById("colors");
  c.innerHTML="";
  ELEMENT_COLORS.forEach(col=>{
    const d=document.createElement("div");
    d.className="thumb";
    if(col==="gold")d.style.background="linear-gradient(135deg,#7a5c00,#fff3b0,#7a5c00)";
    else if(col==="silver")d.style.background="linear-gradient(135deg,#777,#fff,#777)";
    else if(col==="rosegold")d.style.background="linear-gradient(135deg,#8b5a5a,#f3c1c1,#8b5a5a)";
    else d.style.background=col;
    d.onclick=()=>{saveState();selected.color=col;c.style.display="none";draw();}
    c.appendChild(d);
  });
  c.style.display=c.style.display==="block"?"none":"block";
}

function toggleCanvasPalette(){
  const p=document.getElementById("canvasPalette");
  p.innerHTML="";
  CANVAS_BACKGROUNDS.forEach(c=>{
    const d=document.createElement("div");
    d.className="thumb";
    d.style.background=c;
    d.onclick=()=>{saveState();canvasBg=c;p.style.display="none";draw();}
    p.appendChild(d);
  });
  p.style.display=p.style.display==="block"?"none":"block";
}

function saveImage(){
  const a=document.createElement("a");
  a.download="design.jpg";
  a.href=canvas.toDataURL("image/jpeg",1);
  a.click();
}

resizeCanvas();
draw();
</script>

</body>
</html>