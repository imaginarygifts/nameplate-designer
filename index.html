<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Nameplate Designer â€“ Stable Core</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins&family=Montserrat&family=Playfair+Display&family=Great+Vibes&family=Dancing+Script&display=swap" rel="stylesheet">

<style>
body{margin:0;font-family:Poppins;background:#eee;}
#controls{
  background:#fff;padding:10px;
  display:flex;gap:10px;flex-wrap:wrap;
  justify-content:center;
}
select,button{padding:6px 10px;font-size:14px;}
#colors{display:none;background:#fff;padding:8px;margin:auto;width:max-content}
.color{
  width:22px;height:22px;border-radius:50%;
  display:inline-block;margin:4px;border:1px solid #333;cursor:pointer;
}
canvas{
  background:#fff;border:2px solid #000;
  display:block;margin:15px auto;
}
</style>
</head>

<body>

<div id="controls">
  <select onchange="addShape(this.value)">
    <option value="">Shape</option>
    <option value="rect">Rectangle</option>
    <option value="rounded">Rounded</option>
    <option value="circle">Circle</option>
    <option value="oval">Oval</option>
    <option value="pill">Pill</option>
    <option value="diamond">Diamond</option>
    <option value="hexagon">Hexagon</option>
  </select>

  <button onclick="addText()">Add Text</button>

  <select onchange="changeFont(this.value)">
    <option value="">Font</option>
    <option>Poppins</option>
    <option>Montserrat</option>
    <option>Playfair Display</option>
    <option>Great Vibes</option>
    <option>Dancing Script</option>
  </select>
</div>

<div id="colors"></div>

<canvas id="canvas" width="900" height="450"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const colorsDiv = document.getElementById("colors");

let objects = [];
let selected = null;
let dragging = false;
let resizing = false;
let sx=0, sy=0;

const COLORS = ["#000","#fff","#5a3a22","#f7f4e9","#e74c3c","#3498db","#2ecc71"];

/* ---------------- DRAW ---------------- */
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  objects.forEach(o=>{
    ctx.save();
    ctx.translate(o.x,o.y);

    ctx.fillStyle = o.color;

    if(o.type==="shape") drawShape(o);
    if(o.type==="text"){
      ctx.font = `${o.size}px ${o.font}`;
      ctx.textBaseline="top";
      ctx.fillText(o.text,0,0);
      o.w = ctx.measureText(o.text).width;
      o.h = o.size;
    }

    if(o===selected){
      ctx.strokeStyle="#1e90ff";
      ctx.strokeRect(0,0,o.w,o.h);
      ctx.fillRect(o.w-8,o.h-8,8,8); // resize handle
    }

    ctx.restore();
  });
}

/* ---------------- SHAPES ---------------- */
function drawShape(o){
  ctx.beginPath();
  const w=o.w,h=o.h;
  if(o.shape==="rect") ctx.rect(0,0,w,h);
  if(o.shape==="rounded") roundRect(0,0,w,h,20);
  if(o.shape==="circle") ctx.arc(w/2,h/2,w/2,0,Math.PI*2);
  if(o.shape==="oval") ctx.ellipse(w/2,h/2,w/2,h/2,0,0,Math.PI*2);
  if(o.shape==="pill") roundRect(0,0,w,h,h/2);
  if(o.shape==="diamond"){
    ctx.moveTo(w/2,0);ctx.lineTo(w,h/2);
    ctx.lineTo(w/2,h);ctx.lineTo(0,h/2);ctx.closePath();
  }
  if(o.shape==="hexagon"){
    for(let i=0;i<6;i++){
      const a=Math.PI/3*i;
      ctx.lineTo(w/2+w/2*Math.cos(a),h/2+h/2*Math.sin(a));
    }
    ctx.closePath();
  }
  ctx.fill();
}

function roundRect(x,y,w,h,r){
  ctx.moveTo(x+r,y);
  ctx.arcTo(x+w,y,x+w,y+h,r);
  ctx.arcTo(x+w,y+h,x,y+h,r);
  ctx.arcTo(x,y+h,x,y,r);
  ctx.arcTo(x,y,x+w,y,r);
}

/* ---------------- ADD ---------------- */
function addShape(s){
  if(!s) return;
  objects = objects.filter(o=>o.type!=="shape");
  selected = {
    type:"shape",shape:s,
    x:250,y:150,w:350,h:150,
    color:"#000"
  };
  objects.unshift(selected);
  showColors();
  draw();
}

function addText(){
  const t = prompt("Text","Your Name");
  if(!t) return;
  selected = {
    type:"text",text:t,
    x:300,y:200,
    size:40,font:"Poppins",
    color:"#000",w:0,h:0
  };
  objects.push(selected);
  showColors();
  draw();
}

function changeFont(f){
  if(selected && selected.type==="text"){
    selected.font = f;
    draw();
  }
}

/* ---------------- COLORS ---------------- */
function showColors(){
  colorsDiv.innerHTML="";
  COLORS.forEach(c=>{
    const d=document.createElement("div");
    d.className="color";
    d.style.background=c;
    d.onclick=()=>{selected.color=c;draw();};
    colorsDiv.appendChild(d);
  });
  colorsDiv.style.display="block";
}

/* ---------------- EVENTS ---------------- */
canvas.onmousedown = e=>{
  const r = canvas.getBoundingClientRect();
  const mx = e.clientX-r.left;
  const my = e.clientY-r.top;
  selected = null;

  for(let i=objects.length-1;i>=0;i--){
    const o=objects[i];
    if(mx>o.x && mx<o.x+o.w && my>o.y && my<o.y+o.h){
      selected=o;
      sx=mx; sy=my;
      resizing = (mx>o.x+o.w-8 && my>o.y+o.h-8);
      dragging = !resizing;
      showColors();
      break;
    }
  }
  draw();
};

canvas.onmousemove = e=>{
  if(!selected) return;
  const r = canvas.getBoundingClientRect();
  const mx = e.clientX-r.left;
  const my = e.clientY-r.top;

  if(dragging){
    selected.x += mx-sx;
    selected.y += my-sy;
  }
  if(resizing){
    const dw = mx-sx;
    const dh = my-sy;
    if(selected.type==="shape"){
      selected.w += dw;
      selected.h += dh;
    }
    if(selected.type==="text"){
      selected.size += dh*0.5;
      if(selected.size<10) selected.size=10;
    }
  }
  sx=mx; sy=my;
  draw();
};

canvas.onmouseup = ()=>{
  dragging=false;
  resizing=false;
};

draw();
</script>
</body>
</html>
